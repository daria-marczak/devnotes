# Testing React applications with Jest

## Regression
One person adds a new features which improves some views. They are now correct. Another person modifies the new feature but is not aware of breaking effects on a feature. Their view looks good so dev commits changes what causes the another view to regress to unintended state. Tests help as they will fail and we can see what has been done.

## Types of tests
|Type|What it tests|Required tools|
|:---|:------------|:-------------|
|Unit test|A single function or service|Mocha / Jest|
|Component Test|A single component (functionality)|Jest / Enzyme|
|Snapshot|A single component (regression)|Jest|
|End-to-End test|Interaction between multiple components|Protractor / Cypress|

### Unit tests
+ Verifies the functionality of a class or methos
+ Simplest to write and execute
+ Used to test correctnes of application logic
+ Tests can be written prior to application (Test Driven Development)

### Component tests
+ Verifies the correct appearance and functionning of a component
+ Highly sensitive to small changes to underlying components and services
+ Provides a strong defense against regression
+ Verifies changes to component output in response to change in application state
+ Does not verify interactions between two components

### Snapshot tests
+ A subtype of component tests
+ Automatically generated by Jest
+ Verifies output matches pas record
+ Tends to fail if even the slightest change occurs

### Performance tests
+ Measure how long a block of code takes to execute
+ Can identify bottlenecks in application performance
+ Can provide insight into performance differences on different devices and cloud

### Coverage tests
+ A test for your tests
+ Measures application code which is visited (but not necessarily verified) during tests
+ Does not indicate whether application works or not, but it is nice to have

### End-to-End tests
+ Measures the functionality of the whole app
+ Often executed in a virtual or “headless” browser
+ Creates a scenario to test by simulating user actions
+ Different in nature and more difficult to write than other tests
+ Provide the best assurance that the app works

## Jest
+ A library installed via npm or yarn and run via the command line
+ Similar to popular test-runners but with handy extra features
+ A tool made by a team including members of React team
+ Adds snapshot testing, mocking and many other useful features
+ Includes superior assertion library, CLI
+ Works with or without React

### Jest testing ecosystem
+ Enzyme
+ Jasmine / Mocha (Jest is built on top of it)

#### Jasmine / Mocha
+ Test-runners that organizes tests into "describe" and "it" blocks (or "suite" and "test")
+ All assertions inside test are verified whenever the test-runner is invoked, e.g. with command line
+ Doesn't include mocking or snapshots

#### Enzyme
+ Not a test runner like Jest, but provides tools to test React apps specifically
+ Expresses component output as HTML (like React test renderer)
+ Potentially useful but not for every project
